# 教室资源管理系统 - 功能总结

## 🎯 项目概述
企业级教室资源管理系统，采用现代化设计，提供完整的教室、课程、设备等管理功能。

### 技术栈
- **后端**: C++20 + HTTP Server (端口 8080)
- **前端**: Bootstrap 5.3 + Chart.js + 原生JavaScript
- **数据库**: MySQL 8.0+
- **认证**: 基于用户名/密码的本地认证

---

## ✨ 核心功能

### 1. 用户管理系统
- **用户角色**：管理员、教师、学生
- **功能**：
  - 用户CRUD操作
  - 密码重置（所有用户重置为 `123456`）
  - 批量导入用户
  - 角色权限管理

### 2. 教室管理
- **教室列表展示** (分页显示，每页10条)
- **详细信息查看**：容量、教室类型、设备列表
- **增删改查操作**
- **教室状态管理**：可用/不可用

### 3. 课程管理
- **课程信息管理**：名称、代码、学分、学时
- **分页列表** (每页10条)
- **课程详情查看**
- **课程统计分析**

### 4. 排课管理
- **课表生成**：根据课程、教师、教室、时间自动排课
- **冲突检测**：自动检测教室/教师冲突
- **时间段管理**：支持多个时间段
- **分页显示** (每页10条)

### 5. 设备管理
- **设备清单**：教室内的设备类型和数量
- **设备状态**：工作中/维修中/闲置
- **分页展示** (每页10条)
- **设备配置管理**

### 6. 预约管理
- **教室预约功能**：教师可预约教室使用
- **预约审批**：管理员审核预约申请
- **时间冲突检测**
- **预约历史**：分页显示所有预约记录 (每页10条)

### 7. 班级管理
- **班级信息**：班号、年级、专业、学生数
- **班级详情**：学生名单、课程安排
- **分页显示** (每页10条)
- **班级-课程-教师关联管理**

### 8. 通知系统
- **系统通知**：管理员发布通知
- **实时消息**：消息实时推送
- **分页历史** (每页10条)
- **通知标记为已读**

### 9. 数据统计分析
- **仪表盘**：
  - 教室利用率饼图
  - 每日预约数量柱状图
  - 关键统计指标卡片
  - 最近活动列表

---

## 🎨 UI/UX 增强功能

### 1. 分页系统
- ✅ 所有模块统一分页支持（10项/页）
- ✅ 分页导航组件：上一页、下一页、快速跳转
- ✅ 分页状态管理：记住每个模块的当前页码
- ✅ 动态页码按钮：显示5个相邻页码

### 2. 动作按钮美化
- ✅ 彩色按钮组：查看(蓝)、编辑(绿)、删除(红)
- ✅ 梯度背景和阴影效果
- ✅ 悬停动画和平滑过渡
- ✅ 图标+文字组合
- ✅ 工具提示提示语

### 3. 确认对话框
- ✅ 美化的弹窗设计
- ✅ 图标区分操作类型（删除=红、编辑=蓝等）
- ✅ 操作按钮样式统一
- ✅ 自定义标题和消息

### 4. API错误处理
- ✅ 15秒超时设置
- ✅ 用户友好的错误消息
- ✅ 错误类型识别：网络错误、服务器错误等
- ✅ 全局错误提示

### 5. 实时时间显示
- ✅ 顶部栏实时显示当前日期和时间
- ✅ 每分钟自动更新
- ✅ 包含星期显示

### 6. 侧边栏优化
- ✅ 响应式导航菜单
- ✅ 主菜单+子菜单结构
- ✅ Flexbox布局，登出按钮自动吸底
- ✅ 当内容很长时不会被挤压

### 7. 深色主题模式 🌙
- ✅ **主题切换按钮**：顶部栏右侧快速切换
- ✅ **自动切换图标**：浅色时显示☀️，深色时显示🌙
- ✅ **CSS变量系统**：完整的主题颜色定义
- ✅ **全面的深色样式**：
  - 背景色适配
  - 文本色对比度优化
  - 边框和卡片样式
  - 表格、表单、模态框
  - 下拉菜单、分页组件
- ✅ **LocalStorage持久化**：记住用户主题偏好
- ✅ **平滑过渡**：主题切换时的视觉过渡

### 8. 全局快速搜索 🔍
- ✅ **快捷键**：`Ctrl+K` (Windows/Linux) 或 `Cmd+K` (Mac) 打开
- ✅ **搜索模态框**：
  - 优美的overlay设计
  - 实时搜索结果过滤
  - 键盘导航支持
  - 快捷导航菜单
- ✅ **搜索功能**：
  - 按名称搜索模块
  - 实时结果过滤
  - 高亮选中项
- ✅ **键盘导航**：
  - `↑` `↓` 选择项目
  - `Enter` 确认选择
  - `ESC` 关闭搜索
- ✅ **快捷导航**：一键跳转到：
  - 仪表盘
  - 教室管理
  - 课程管理
  - 排课管理
  - 设备管理
  - 预约管理
- ✅ **响应式设计**：适配各种屏幕尺寸

### 9. 顶部栏增强
- ✅ **页面标题动态更新**
- ✅ **当前时间显示**
- ✅ **快捷搜索按钮**（支持Ctrl+K快键）
- ✅ **主题切换按钮**
- ✅ **用户信息下拉菜单**
- ✅ **响应式布局**

---

## 📊 数据库架构

### 核心表结构
- `users`: 用户信息
- `classrooms`: 教室信息
- `courses`: 课程信息
- `schedules`: 排课记录
- `equipments`: 设备信息
- `bookings`: 预约记录
- `classes`: 班级信息
- `notices`: 通知信息
- `enrollments`: 班级-课程关联

### 默认凭证
- **用户名**：`admin`
- **密码**：`123456`
- **数据库密码**：`@123Fengaoran`

---

## 🔧 API端点

### 用户管理
- `GET /api/users` - 获取用户列表
- `POST /api/users` - 创建用户
- `PUT /api/users/{id}` - 更新用户
- `DELETE /api/users/{id}` - 删除用户
- `PUT /api/users/{id}/reset-password` - 重置密码
- `POST /api/users/batch` - 批量导入

### 教室管理
- `GET /api/classrooms` - 获取教室列表
- `GET /api/classrooms/{id}` - 获取教室详情
- `POST /api/classrooms` - 创建教室
- `PUT /api/classrooms/{id}` - 更新教室
- `DELETE /api/classrooms/{id}` - 删除教室

### 其他模块
- 课程：`GET/POST/PUT/DELETE /api/courses`
- 排课：`GET/POST/PUT/DELETE /api/schedules`
- 设备：`GET/POST/PUT/DELETE /api/equipments`
- 预约：`GET/POST/PUT/DELETE /api/bookings`
- 班级：`GET/POST/PUT/DELETE /api/classes`
- 通知：`GET/POST /api/notices`

---

## 📱 响应式设计
- ✅ 桌面适配（全宽）
- ✅ 平板适配（中等屏幕）
- ✅ 手机适配（小屏幕）
- ✅ 触摸友好的按钮和菜单
- ✅ 隐藏式导航菜单

---

## 🎬 使用说明

### 启动系统
```bash
# 启动后端
cd /Users/fengrr/Desktop/程序设计方法实现/code/sys/server/build
./classroom_server

# 访问前端
http://localhost:8080
```

### 主要快捷键
- `Ctrl+K` / `Cmd+K` - 打开快速搜索
- `↑` `↓` - 在搜索结果中导航
- `Enter` - 确认选择
- `ESC` - 关闭搜索或对话框

### 深色主题
- 点击顶部栏右侧的主题按钮即可切换
- 主题偏好会自动保存

---

## 📝 最近更新 (当前会话)

1. ✅ **分页系统** - 所有模块实现10项/页分页
2. ✅ **API错误处理** - 15秒超时，友好错误提示
3. ✅ **按钮美化** - 梯度背景、阴影、悬停动画
4. ✅ **确认对话框** - 美化设计，图标区分操作类型
5. ✅ **侧边栏优化** - 使用Flexbox，登出按钮自动吸底
6. ✅ **深色主题** - 完整的浅色/深色主题系统，一键切换
7. ✅ **快速搜索** - 全局快捷键搜索，键盘导航，快速导航菜单

---

## 🚀 性能优化
- ✅ 分页数据减少初始加载量
- ✅ CSS变量系统减少样式重复
- ✅ 防抖搜索结果更新
- ✅ 适当的缓存策略
- ✅ 优化的动画性能

---

## 🎓 教学价值
本系统展示了以下现代Web应用开发最佳实践：
- 前后端分离架构
- RESTful API设计
- 响应式UI设计
- 深色主题实现
- 快捷键快速导航
- 完整的CRUD操作
- 分页和数据管理
- 角色权限控制
- 错误处理和用户反馈

---

## 📄 文件结构
```
code/
├── sys/
│   ├── frontend/
│   │   ├── index.html          # 主HTML文件 (3397行)
│   │   └── app.js              # 前端逻辑 (3155行)
│   ├── server/
│   │   ├── src/
│   │   │   ├── main.cpp
│   │   │   ├── server.cpp
│   │   │   └── ...
│   │   └── build/
│   │       └── classroom_server # 可执行文件
│   └── database/
│       └── schema.sql          # 数据库结构
```

---

**系统版本**: 2.0.0  
**最后更新**: 2025年 12 18 frr 
**开发语言**: C++, JavaScript, SQL  
**许可证**: 教学使用
